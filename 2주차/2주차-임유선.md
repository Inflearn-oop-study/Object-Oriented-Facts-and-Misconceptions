# 정리

## 객체지향과 인지 능력

인간은 인지 능력을 이용해 세상에 존재하는 다양한 객체를 식별하고 분류한다. 객체란, 인간이 분명하게 인지하고 구별할 수 있는 물리적인 또는 개념적인 경계를 지닌 어떤 것이다. 그러나 소프트웨어 세계에선 전등이 스스로 불을 끄고 킬 수 있듯이, 이런점이 현실 세계와는 이질적인 부분이다.

## 객체, 그리고 이상한 나라

작가는 이상한 나라의 앨리스에 빗대어 객체지향을 설명한다. 앨리스의 키, 위치는 `상태`, 케이크를 먹거나 부채질을 하거나 문을 통과하는 등의 행위는 `행동`이라고 할 수 있다. 앨리스의 상태가 바뀌어도 여전히 앨리스는 앨리스로 `식별 가능`하다.

## 객체, 그리고 소프트웨어 나라

객체의 다양한 특성을 효과적으로 설명하기 위해선 객체를 `상태`, `행동`, `식별자`를 지닌 실체로 보는것이 효과적이다. 어떤 행동의 결과를 예측하려면 이전 행동을 기억하고 있어야 하는데, 매번 모든 행동을 기억하긴 어렵다. 그래서 **상태** 가 필요하다. 상태는 현재를 기반으로 객체의 행동방식을 이해할 수 있는 장치이다.

객체의 상태를 표현하는 것은 단순한 값일수도 있고, 객체일수도 있다. 이때 객체의 상태를 구성하는 모든 것을 `프로퍼티`라고 한다. 프로퍼티는 변경되지 않으므로, 정적이다. 하지만 **프로퍼티 값**은 시간이 흐름에 따라 변경되기 때문에 정적이다.

객체는 **링크** 되어 있어야 요청을 주고받을 수 있다. 객체와 객체는 링크를 통해 협력하고, 객체를 구성하는 단순한 값은 `속성`이다. 객체의 상태 정의는 다음과 같다.

> **상태**는 특정 시점에 객체가 가지고 있는 정보의 집합으로 객체의 구조적 특징을 표현한다. 객체의 상태는 객체에 존재하는 정적인 프로퍼티와 동적인 프로퍼티 값으로 구성된다. 객체의 프로퍼티는 단순한 값과 다른 객체를 참조하는 링크로 구분할 수 있다.

객체의 상태는 행동으로 인해 변화한다. 객체의 행동은 side effect를 야기한다. 객체의 행동은 이 두가지 관점의 side effect를 명확하게 서술해야 한다.

> - 객체 자신의 상태 변경
> - 행동 내에서 협력하는 다른 객체에 대한 메시지 전송

이 책에서의 행동의 정의는 다음과 같다.

> **행동** 이란 외부의 요청 또는 수신된 메시지에 응답하기 위해 동작하고 반응하는 활동이다. 행동의 결과로 객체는 자신의 상태를 변화하거나 다른 객체에게 메시지를 전달할 수 있다. 객체는 행동을 통해 다른 객체와의 협력에 참여하므로 행동은 외부에 가시적이어야 한다.

그렇다. 행동은 외부에 가시적이다. 하지만 상태는 그렇지 않다. 상태의 변경은 행동을 통해 이루어진다. 이것이 **객체의 캡슐화** 이다. 객체를 캡슐화하면 협력을 단순하고 유연하게 만들 수 있다.

상태는 변화하기 때문에 객체가 동일한지 `동일성`을 따지기 위한 수단으론 부족하다. 별도의 `식별자`가 필요하다.

## 기계로서의 객체

객체의 상태를 조회하기 위한 것은 `쿼리`, 객체의 상태를 변경하는 작업을 `명령` 이라고 한다. 책에서 제시한 '기계' 예제로도 객체를 설명할 수 있다. 사각형 버튼은 상태를 변경하는 명령이고, 둥근 버튼은 쿼리다. 명령과 쿼리가 외부에 제공된다. 하지만 기계 내부의 상태에 직접 접근할 수는 없다. 또한 사각형 버튼을 눌러 또다른 기계에게 요청을 전송할 수 있다. 이것이 객체간의 링크이다.

## 행동이 상태를 결정한다

이 장에서 인상깊었던 것은 **상태보단, 행동을 먼저 결정해야 한다는 것** 이다. 클래스를 먼저 정의하고, 그 안에 프로퍼티를 정의하고, 메소드를 정의하는 것이 아니라, 객체를 정의할땐 **행동** 에 초점을 맞춰야 한다. 객체의 행동은 협력에 참여하는 유일한 방법이다. 객체지향 설계는 애플리케이션에 필요한 협력을 생각하고, 협력하기 위해 필요한 행동을 생각하고, 그 다음에 행동을 수행할 객체를 선택하는 것이다. 협력 안에서 객체의 행동은 협력에 참여하면서 완수해야 하는 책임을 의미한다. 따라서 어떤 책임이 필요한가를 결정하는 과정이 설계를 주도해야 한다. 이러한 관점을 책임-주도 설계라고 한다.

## 은유와 객체

현실세계와는 달리 객체는 스스로 행동할 수 있다. 어떤 사람은 이런 객체의 특징을 의인화로 설명한다.

현실세계와 객체지향 세계는 모방이 아니라 은유라고 할 수 있다. 현실 세계를 바탕으로 은유를 통해 새로운 세계를 창조하는 것이 객체지향 설계이다.

# 느낀점

1장에서는 객체간의 협력을 강조했고, 이번 2장에서는 객체의 본질이 무엇인지 설명한다. 객체는 상태와 행동, 식별자를 가진 존재이다. 객체지향 설계를 할 때, 클래스다이어그램을 그리는 과정도 이 행동을 정의하기 위한 과정이라고 생각된다. 행동의 결과를 나타내기 위해 상태가 필요한 것이다. 앞으로 설계를 할 때에는 객체간의 협력에 초점을 맞추고, 그다음 책임과 행동을 정의한 다음에 그것을 나타내기 위한 상태를 고민해야겠다는 생각을 했다. 상태에 매몰되면 확장성을 잃을 수 있다! 이러한 관점을 갖고 다른 객체지향 책을 읽었을때 더 중요한 본질에 집중할 수 있겠다는 생각이 든다.
